var listProduct = [
    //cat 1
    {
        id: 100,
        name: 'Sun / Moon (1 sp)',
        trademark: 'TotWoo', //thương hiệu
        price: 1645000,
        price_sale: 1845000,
        color: '',
        material: 'Hàng chính hãng', //chất liệu
        thumb: 'uploads/tiny_uploads/totwoo_sun1.png',
        pictures: [
            "uploads/tiny_uploads/totwoo_sun1.png",
            "uploads/tiny_uploads/totwoo_moon1.png",
            "uploads/tiny_uploads/totwoo_sun.png",
            "uploads/tiny_uploads/totwoo_moon.png",
            "uploads/tiny_uploads/totwoo_sun_moon.png"
        ],
        category: 1,
        url: 'detail-sun-or-moon.html'
    },
    {
        id: 101,
        name: 'Sun & Moon (combo 2sp)',
        trademark: 'TotWoo', //thương hiệu
        price: 3000000,
        price_sale: 3200000,
        color: '',
        material: 'Hàng chính hãng', //chất liệu
        thumb: 'uploads/tiny_uploads/totwoo_sun_moon.png',
        pictures: [
            "uploads/tiny_uploads/totwoo_sun1.png",
            "uploads/tiny_uploads/totwoo_moon1.png",
            "uploads/tiny_uploads/totwoo_sun_moon.png",
            "uploads/tiny_uploads/totwoo_sun.png",
            "uploads/tiny_uploads/totwoo_moon.png",
        ],
        category: 1,
        url: 'detail-sun-moon.html'
    },
    {
        id: 102,
        name: 'Lily of the Valley',
        trademark: 'TotWoo', //thương hiệu
        price: 5150000,
        price_sale: 5350000,
        color: '',
        material: 'Hàng chính hãng', //chất liệu
        thumb: 'uploads/tiny_uploads/totwoo_lily1.jpg',
        pictures: [
            "uploads/tiny_uploads/totwoo_lily1.jpg",
            "uploads/tiny_uploads/totwoo_lily2.png",
            "uploads/tiny_uploads/totwoo_lily3.jpg",
            "uploads/tiny_uploads/totwoo_lily4.jpg"
        ],
        category: 1,
        url: 'detail-lily-of-the-valley.html'
    },
    {
        id: 103,
        name: 'Couple Bracelet & Necklace',
        trademark: 'TotWoo', //thương hiệu
        price: 8700000,
        price_sale: 9000000,
        color: '',
        material: 'Hàng chính hãng', //chất liệu
        thumb: 'uploads/tiny_uploads/totwoo_vongtay_daychuyen.jpg',
        pictures: [
            "uploads/tiny_uploads/totwoo_vongtay_daychuyen.jpg",
            "uploads/tiny_uploads/totwoo_vongtay_daychuyen2.jpg",
            "uploads/tiny_uploads/totwoo_daychuyen.jpg",
        ],
        category: 1,
        url: 'detail-couple-bracelet-necklace.html'
    },
    {
        id: 104,
        name: 'We Bold',
        trademark: 'TotWoo', //thương hiệu
        price: 3150000,
        price_sale: 3350000,
        color: '',
        material: 'Hàng chính hãng', //chất liệu
        thumb: 'uploads/tiny_uploads/totwoo_we_bold.jpg',
        pictures: [
            "uploads/tiny_uploads/totwoo_we_bold.jpg",
            "uploads/tiny_uploads/totwoo_we_bold2.jpg",
            "uploads/tiny_uploads/totwoo_we_bold3.jpg",
        ],
        category: 1,
        url: 'detail-we-bold.html'
    },
    {
        id: 105,
        name: 'Flower & Leaves',
        trademark: 'TotWoo', //thương hiệu
        price: 122345,
        price_sale: 121345,
        color: '',
        material: 'Hàng chính hãng', //chất liệu
        thumb: 'uploads/tiny_uploads/totwoo_flower_leaves.jpg',
        pictures: [
            "uploads/tiny_uploads/totwoo_flower_leaves.jpg",
            "uploads/tiny_uploads/totwoo_lily1.jpg",
            "uploads/tiny_uploads/totwoo_lily2.jpg",
            "uploads/tiny_uploads/totwoo_lily3.jpg",
            "uploads/tiny_uploads/totwoo_lily4.jpg",
        ],
        category: 1,
        url: 'detail-flower-leaves.html'
    },

    //cat 2
    {
        id: 200,
        name: 'Wing Bling Flower Me Earings',
        trademark: 'Wing Bling', //thương hiệu
        price: 480000,
        price_sale: 525000,
        color: 'Hồng / Bạc',
        material: 'Hàng chính hãng', //chất liệu
        thumb: 'uploads/tiny_uploads/wing_bling_flower_me_earing.jpg',
        pictures: [
            "uploads/tiny_uploads/wing_bling_flower_me_earing.jpg",
            "uploads/tiny_uploads/wing_bling_flower_me_earing.jpg",
            "uploads/tiny_uploads/wing_bling_flower_me_earing.jpg"
        ],
        category: 2,
        url: 'detail-sun-moon.html'
    },
    {
        id: 201,
        name: 'Wing Bling Snowflake Earings',
        trademark: 'Wing Bling', //thương hiệu
        price: 380000,
        price_sale: 480000,
        color: 'Bạc / Hồng',
        material: 'Hàng chính hãng', //chất liệu
        thumb: 'uploads/tiny_uploads/wing_bling_snowflake.jpg',
        pictures: [
            "uploads/tiny_uploads/wing_bling_snowflake.jpg",
            "uploads/tiny_uploads/wing_bling_snowflake.jpg",
            "uploads/tiny_uploads/wing_bling_snowflake.jpg"
        ],
        category: 2,
        url: 'detail-sun-moon.html'
    },
    {
        id: 202,
        name: 'Wing Bling Petite Dress Necklace',
        trademark: 'Wing Bling', //thương hiệu
        price: 450000,
        price_sale: 6500000,
        color: 'Pink',
        material: 'Hàng chính hãng', //chất liệu
        thumb: 'uploads/tiny_uploads/wing_bling_petite_dress_necklace.jpg',
        pictures: [
            "uploads/tiny_uploads/wing_bling_petite_dress_necklace.jpg",
            "uploads/tiny_uploads/wing_bling_petite_dress_necklace.jpg",
            "uploads/tiny_uploads/wing_bling_petite_dress_necklace.jpg"
        ],
        category: 2,
        url: 'detail-sun-moon.html'
    },

    //cat 3
    {
        id: 300,
        name: 'Coach Floral Eau De Parfum 30ml',
        trademark: 'Coach', //thương hiệu
        price: 1399000,
        price_sale: 190000,
        color: 'Hồng / Bạc',
        material: 'Hàng chính hãng', //chất liệu
        thumb: 'uploads/tiny_uploads/coach_floral_eau.jpg',
        pictures: [
            "uploads/tiny_uploads/coach_floral_eau.jpg",
            "uploads/tiny_uploads/coach_floral_eau.jpg",
            "uploads/tiny_uploads/coach_floral_eau.jpg"
        ],
        category: 3,
        url: 'detail-sun-moon.html'
    },
    {
        id: 301,
        name: 'Salvatore Ferragamo Signorina In Flore 20ml',
        trademark: 'Salvatore', //thương hiệu
        price: 980000,
        price_sale: 1600000,
        color: 'Bạc / Hồng',
        material: 'Hàng chính hãng', //chất liệu
        thumb: 'uploads/tiny_uploads/salvatore_ferragamo_signorina_in_flore.jpg',
        pictures: [
            "uploads/tiny_uploads/salvatore_ferragamo_signorina_in_flore.jpg",
            "uploads/tiny_uploads/salvatore_ferragamo_signorina_in_flore.jpg",
            "uploads/tiny_uploads/salvatore_ferragamo_signorina_in_flore.jpg"
        ],
        category: 3,
        url: 'detail-sun-moon.html'
    },
    {
        id: 302,
        name: 'Guess Girl 30ml',
        trademark: 'Guess', //thương hiệu
        price: 850000,
        price_sale: 16500000,
        color: 'Pink',
        material: 'Hàng chính hãng', //chất liệu
        thumb: 'uploads/tiny_uploads/guess_girl.jpg',
        pictures: [
            "uploads/tiny_uploads/guess_girl.jpg",
            "uploads/tiny_uploads/guess_girl.jpg",
            "uploads/tiny_uploads/guess_girl.jpg"
        ],
        category: 3,
        url: 'detail-sun-moon.html'
    },
]

function loadCart() {
    var cart = window.localStorage.getItem("cart");
    if (cart != undefined && cart != null) {
        var cartJson = JSON.parse(cart);
        console.log('load cart ', cartJson);

        if (cartJson.length == 0) {
            $('.card-empty').show();
            $('#list-product-item-order').empty();
            $('.mini-cart-order .number').text(nh_functions.formatMoney(0));
            $("#total_price_final").text(nh_functions.formatMoney(0));
        } else {
            $('.card-empty').hide();
            $('#list-product-item-order').empty();

            let totalAmount = 0;
            let totalQuantiry = 0;
            cartJson.forEach(function (item) {
                //lấy detail product
                let productDetail = null
                for (let i = 0; i < listProduct.length; i++) {
                    if (listProduct[i].id == item.item_id) {
                        productDetail = listProduct[i]
                    }
                }

                if (productDetail != null) {
                    totalAmount += item.quantity * productDetail.price;
                    totalQuantiry += item.quantity;

                    var html = '<div class="media position-relative product-item-order">'
                    html += '<a class="product-item-info delete-order pull-right" title="Xóa" product-id="' + productDetail.id + '" item-id="' + productDetail.id + '" style="cursor: pointer;"> <i class="fa fa-times"></i> </a>';
                    html += '<div class="media-left">';
                    html += '<a href="' + productDetail.url + '" class="img-80">';
                    html += '<img src="' + productDetail.thumb + '" />';
                    html += '</a>';
                    html += '</div>';
                    html += '<div class="media-body">';
                    html += '<div class="price-well">' + nh_functions.formatMoney(productDetail.price) + 'đ</div>';
                    html += '<p class="price-before"><span>' + nh_functions.formatMoney(productDetail.price_sale) + 'đ</span></p>';
                    html += '<h4 class="media-heading"><a href="' + productDetail.url + '"> ' + productDetail.name + ' </a></h4>';
                    html += '<label class="hidden">Số lượng</label>';
                    html += '<div class="order-quantity">';
                    html += '<p>Số lượng:</p>';
                    html += '<input type="number" name="quantity[]" value="' + item.quantity + '" item-id="' + productDetail.id + '" class="input-cart" style="width: 40px;" />';
                    html += '</div>';
                    html += '</div>';
                    html += '</div>';

                    $('#list-product-item-order').append(html);
                }
            })

            var htmlAll = ''
            $('.box-cart-right-cont').append(htmlAll);

            $('.mini-cart-order .number').text(nh_functions.formatMoney(totalQuantiry));
            $("#total_price_final").text(nh_functions.formatMoney(totalAmount) +"đ");

        }
    } else {
        $('.mini-cart-order .number').text(nh_functions.formatMoney(0));
        $("#total_price_final").text(nh_functions.formatMoney(0));
    }
}

function loadCartNumber() {
    let totalQuantiry = 0;

    var cart = window.localStorage.getItem("cart");
    if (cart != undefined && cart != null) {
        var cartJson = JSON.parse(cart);

        if (cartJson.length > 0) {
            cartJson.forEach(function (item) {
                totalQuantiry += item.quantity;
            })
        }
    }

    $('.mini-cart-order .number').text(nh_functions.formatMoney(totalQuantiry));
}

function loadProduct(category) {
    listProduct.forEach(function (productDetail) {
        //lấy detail product
        if (productDetail.category == category) {

            var htmlProduct = '<div class="list-item col-md-4 col-sm-4 col-xs-12 cc-product-main">'
            htmlProduct += '<div class="item-product hover-action-product style-view-2 clearfix cc-product-wrapper" >'
            htmlProduct += '<span class="status-product bg-red">HOT</span>'
            htmlProduct += '<div class="img bg-img-50" title="' + productDetail.name + '">'
            htmlProduct += '<a href="' + productDetail.url + '" title="' + productDetail.name + '">'
            htmlProduct += '<img src="' + productDetail.thumb + '" alt="' + productDetail.name + '" class="img-product" />'
            htmlProduct += '</a>'
            htmlProduct += '</div>'
            htmlProduct += '<div class="info">'
            htmlProduct += '<h4 class="title-product">'
            htmlProduct += '<a href="' + productDetail.url + '">' + productDetail.name + '</a>'
            htmlProduct += '</h4>'
            htmlProduct += '<div class="price price-inline">'
            htmlProduct += '<p class="price-well">'
            htmlProduct += nh_functions.formatMoney(productDetail.price) + 'đ'
            htmlProduct += '</p>'
            htmlProduct += '</br>'
            htmlProduct += '<p class="price-before">'
            htmlProduct += nh_functions.formatMoney(productDetail.price_sale) + 'đ'
            htmlProduct += '</p>'
            htmlProduct += '</div>'
            htmlProduct += '<div class="show-list">'
            htmlProduct += '<div class="desc-product-thumb">'
            htmlProduct += '<p></p>'
            htmlProduct += '</div>'
            htmlProduct += '</div>'
            htmlProduct += '<div class="action-product bg-main">'
            htmlProduct += '<a href="javascript://" class="item-action btn-shop-cart" item-id="' + productDetail.id + '" status-store="">'
            htmlProduct += '<i class="fa fa-shopping-cart"></i>'
            htmlProduct += '<!--Thêm vào giỏ hàng-->'
            htmlProduct += '</a>'
            htmlProduct += '</div>'

            htmlProduct += '<div class="cc-cart-item">'
            htmlProduct += '<a href="javascript://" class="item-action btn-shop-cart cc-cart-icon-mobile" item-id="' + productDetail.id + '" status-store="">'
            htmlProduct += '<i class="fa fa-shopping-cart"></i>'
            htmlProduct += '<!--Thêm vào giỏ hàng-->'
            htmlProduct += '</a>'
            htmlProduct += '</div>'

            htmlProduct += '<div class="content-attr hidden"></div>'
            htmlProduct += '</div>'
            htmlProduct += '</div>'
            htmlProduct += '</div>'

            document.getElementById('list-product-item-cat' + category).insertAdjacentHTML('beforeend', htmlProduct)
        }
    })
}
